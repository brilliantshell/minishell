name: Build minishell

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  build:

    runs-on: macos-10.15

    steps:
    - uses: actions/checkout@v2
    - name: get readline library dir before reinstall
      run: brew info readline
    - name: setup readline library
      run: brew reinstall readline
    - name: get readline library dir
      run: brew info readline
    - name: export readline dir
      run: $(brew info readline | grep export)
    - name: check make rules
      run: make -n
    - name: build-minishell
      run: make
      

